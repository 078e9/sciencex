### Глава 2. 

##### Парагрф 2.1. ?
`Командная строка` — это текстовый интерфейс, который используется для ввода инструкций в компьютерную систему. Командная строка Linux обеспечивается программой, называемой `оболочкой`.

Пользовательской оболочкой по умолчанию в Red Hat Enterprise Linux (RHEL) является оболочка GNU Bourne-Again (bash). Оболочка bash — это улучшенная версия оригинальной оболочки Bourne Shell (sh) в системах UNIX.

Оболочка отображает строку, когда она ожидает ввода пользователя, называемую приглашением оболочки. Когда обычный пользователь запускает оболочку, приглашение включает в себя завершающий символ доллара ($):

Символ решетки (#) заменяет символ доллара ($), когда оболочка работает от имени суперпользователя root. Этот символ указывает на то, что это оболочка суперпользователя, которая помогает избежать ошибок, которые могут повлиять на всю систему.

Команда — это имя программы, которую нужно запустить. За ним может следовать один или несколько параметров, которые регулируют поведение команды или ее действия. Опции обычно начинаются с одного или двух дефисов (например, -a или --all), чтобы отличать их от аргументов. За командами также могут следовать один или несколько аргументов, которые часто указывают цель, над которой должна работать команда.

Например, в строке usermod -L user01 usermod — это команда, -L — опция, а user01 — аргумент. Эта команда блокирует пароль учетной записи пользователя user01.

Терминал — это текстовый интерфейс для ввода команд и вывода вывода из компьютерной системы. Для запуска оболочки необходимо войти в компьютер через терминал.

Аппаратная клавиатура и дисплей для ввода и вывода могут быть напрямую подключены к компьютеру. Это физическая консоль машины с Linux. Физическая консоль поддерживает несколько виртуальных консолей, которые могут работать на отдельных терминалах. Каждая виртуальная консоль поддерживает независимый сеанс входа в систему. 

Вы можете переключаться между виртуальными консолями, одновременно нажимая Ctrl+Alt и функциональную клавишу (от F1 до F6). Большинство этих виртуальных консолей запускают терминал, который предоставляет текстовую подсказку для входа в систему. Если вы правильно введете имя пользователя и пароль, вы войдете в систему и получите приглашение оболочки.

В Red Hat Enterprise Linux 9, если графическая среда доступна, экран входа в систему запускается на первой виртуальной консоли, которая называется tty1. Пять дополнительных текстовых приглашений для входа доступны на виртуальных консолях со второго (tty2) по шестой (tty6).

Обычно графический сеанс заменяет приглашение на вход на второй виртуальной консоли (tty2). Однако если активный текстовый сеанс входа в систему (а не только приглашение на вход) использует эту консоль, то вместо нее используется следующая свободная виртуальная консоль.

Графический экран входа в систему продолжает работать на первой виртуальной консоли (tty1). Если вы уже вошли в графическую сессию и переключились на другого пользователя в графической среде, не выходя из системы, то для этого пользователя запускается другая графическая среда на следующей доступной виртуальной консоли.

При выходе из графической среды происходит выход из виртуальной консоли, а физическая консоль автоматически переключается обратно на графический экран входа в систему на первой виртуальной консоли.

В Red Hat Enterprise Linux 6 и 7 графический экран входа в систему запускается на первой виртуальной консоли, но при входе в систему исходная графическая среда заменяет экран входа в первую виртуальную консоль, а не запускается на новой виртуальной консоли. В Red Hat Enterprise Linux 8 поведение такое же, как и в Red Hat Enterprise Linux 9.

У автономного сервера нет постоянно подключенных к нему клавиатуры и дисплея. Центр обработки данных может быть заполнен множеством стоек с автономными серверами, и отсутствие клавиатуры и дисплея для каждого из них позволяет сэкономить место и расходы. Для администраторов запрос на вход в систему для автономного сервера может быть предоставлен его последовательной консолью, которая работает через последовательный порт, подключенный к сетевому консольному серверу для удаленного доступа.

Последовательная консоль обычно используется для доступа к серверу, если сетевая карта сервера неправильно настроена и вход на сервер через обычное сетевое соединение становится невозможным. Однако в большинстве случаев доступ к автономным серверам осуществляется другими способами по сети, например, с помощью виртуальных сетевых вычислений (VNC) для запуска графического интерфейса на целевой машине.

Пользователям и администраторам Linux часто необходимо получить доступ к оболочке удаленной системы, подключившись к ней по сети. В современной вычислительной среде многие автономные серверы представляют собой виртуальные машины или работают как экземпляры общедоступного или частного облака. Эти системы не являются физическими и не имеют реальных аппаратных консолей. Они могут даже не предоставить доступ к своей (моделируемой) физической консоли или последовательной консоли.

В Linux наиболее распространенным способом получить приглашение оболочки в удаленной системе является использование Secure Shell (SSH). Большинство систем Linux (включая Red Hat Enterprise Linux) и macOS предоставляют для этой цели программу командной строки OpenSSH.

В этом примере пользователь с приглашением оболочки на хост-компьютере использует ssh для входа в удаленный хост системы Linux в качестве пользователя удаленного пользователя:

```bash
[user@host ~]$ ssh remoteuser@remotehost
remoteuser@remotehost's password: password
[remoteuser@remotehost ~]$
```

Команда ssh шифрует соединение, чтобы защитить соединение от подслушивания или кражи паролей и контента.

Некоторые системы, например новые облачные экземпляры, в целях повышения безопасности не позволяют пользователям использовать пароль для входа в систему по ssh. Альтернативный способ аутентификации на удаленном компьютере без ввода пароля — аутентификация с открытым ключом.

При этом методе аутентификации у пользователей есть специальный идентификационный файл с закрытым ключом, который эквивалентен паролю и который они держат в секрете. Их учетная запись на сервере настроена с использованием соответствующего открытого ключа, который не обязательно должен быть секретным. При входе в систему пользователи могут настроить ssh для предоставления закрытого ключа. Если соответствующий открытый ключ установлен в этой учетной записи на этом удаленном сервере, пользователь входит в систему без запроса пароля.

В следующем примере пользователь с приглашением оболочки на хост-компьютере входит в систему удаленного хоста как удаленный пользователь с помощью ssh, используя метод аутентификации с открытым ключом. Параметр -i команды ssh используется для указания файла закрытого ключа пользователя, которым является mylab.pem. Соответствующий открытый ключ уже настроен как авторизованный ключ в учетной записи удаленного пользователя.

```bash
[user@host ~]$ ssh -i mylab.pem remoteuser@remotehost
[remoteuser@remotehost ~]$
```

Чтобы соединение работало, только пользователь, владеющий файлом, может иметь доступ для чтения файла закрытого ключа. В предыдущем примере, где закрытый ключ находится в файле mylab.pem, вы можете использовать команду chmod 600 mylab.pem, чтобы гарантировать, что только владелец может прочитать файл. Как установить права доступа к файлам, обсуждается более подробно в следующей главе.

Пользователи также могут настроить закрытые ключи, которые будут проверяться автоматически, но это обсуждение выходит за рамки этого раздела. Ссылки в конце этого раздела содержат ссылки на дополнительную информацию по этой теме.

```bash
[user@host ~]$ ssh -i mylab.pem remoteuser@remotehost
The authenticity of host 'remotehost (192.0.2.42)' can't be established.
ECDSA key fingerprint is 47:bf:82:cd:fa:68:06:ee:d8:83:03:1a:bb:29:14:a3.
Are you sure you want to continue connecting (yes/no)? yes
[remoteuser@remotehost ~]$
```

Когда вы закончите работу с оболочкой и захотите выйти, вы можете выбрать один из нескольких способов завершения сеанса. Вы можете ввести команду выхода, чтобы завершить текущий сеанс оболочки. Либо завершите сеанс, нажав Ctrl+D.

В следующем примере показан пользователь, который выходит из сеанса SSH:

```bash
[remoteuser@remotehost ~]$ exit
logout
Connection to remotehost closed.
[user@host ~]$
```

Среда рабочего стола — это графический интерфейс пользователя в системе Linux. GNOME 40 — это среда рабочего стола по умолчанию в Red Hat Enterprise Linux 9. Она предоставляет пользователям интегрированный рабочий стол и унифицированную платформу разработки поверх графической среды, которую предоставляет либо Wayland (по умолчанию), либо устаревшая система X Window.

##### Итог парагрфа 2.1:

Оболочка Bash — это командный интерпретатор, который предлагает интерактивным пользователям указывать команды Linux.

Многие команды имеют параметр --help, который отображает сообщение или экран об использовании.

Вы можете использовать рабочие пространства для организации нескольких окон приложений.

Кнопка «Действия» в левом верхнем углу верхней панели обеспечивает режим обзора, который помогает упорядочивать окна и запускать приложения.

Команда file сканирует начало файла и отображает его тип.

Команды head и Tail отображают начало и конец файла соответственно.

Вы можете использовать табуляцию для завершения имен файлов при вводе их в качестве аргументов команд.

Вы можете использовать графический интерфейс для многих административных задач. Вы можете отключить интерфейс, чтобы сохранить ресурсы для запуска приложений.

Вы можете написать множество команд в одной строке, используя точку с запятой; символ и может запускать одну команду в нескольких строках, используя символ обратной косой черты \.